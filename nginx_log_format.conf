# Nginx 日志格式配置
# 根据 nginx_ip_monitor.py 中的正则表达式生成

# ============================================
# Custom格式（推荐，用于监控工具）
# ============================================
log_format access_log '$remote_addr - $remote_user [$time_local] '
                     '"$request" $status $body_bytes_sent '
                     '"$http_referer" "$http_user_agent" '
                     'Host: "$host" '
                     'Request_URI: "$request_uri" '
                     'Domain: "$server_name" '
                     'Headers: "$http_authorization" "$http_cookie"'
                     'Upstream: "$upstream_addr"';

# 使用方式：
# access_log /var/log/nginx/access.log access_log;

# ============================================
# Combined格式（标准格式，备用）
# ============================================
# 这是nginx默认的combined格式，无需单独定义
# 格式为：
# $remote_addr - $remote_user [$time_local] "$request" $status $body_bytes_sent "$http_referer" "$http_user_agent"

# 使用方式：
# access_log /var/log/nginx/access.log combined;

# ============================================
# 完整的nginx配置示例
# ============================================
# http {
#     # 定义自定义日志格式
#     log_format access_log '$remote_addr - $remote_user [$time_local] '
#                          '"$request" $status $body_bytes_sent '
#                          '"$http_referer" "$http_user_agent" '
#                          'Host: "$host" '
#                          'Request_URI: "$request_uri" '
#                          'Domain: "$server_name" '
#                          'Headers: "$http_authorization" "$http_cookie"'
#                          'Upstream: "$upstream_addr"';
#     
#     server {
#         listen 80;
#         server_name example.com;
#         
#         # 使用自定义格式记录访问日志
#         access_log /var/log/nginx/access.log access_log;
#         
#         # 其他配置...
#     }
# }

